'use client';

import React, { useState, useEffect } from 'react';

const SolidChoiceCarousel = () => {
  const [currentIndex, setCurrentIndex] = useState(0);
  const [isReady, setIsReady] = useState(false);

  // 预先加载所有内容
  useEffect(() => {
    // 等待组件完全挂载并渲染
    const timer = setTimeout(() => {
      setIsReady(true);
    }, 100);
    
    return () => clearTimeout(timer);
  }, []);

  const items = [
    {
      id: 1,
      title: "Scalability",
      description: "Solana's 65,000+ TPS and $65B+ perp market liquidity allow $SUSD to scale to billions without Ethereum's bottlenecks.",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" width="40" height="40">
          <path fill="currentColor" d="M24.35 33.35c1.3333 0 2.4417 -0.325 3.325 -0.975 0.8833 -0.65 1.325 -1.5083 1.325 -2.575 0 -1.1 -0.4167 -2.025 -1.25 -2.775 -0.8333 -0.75 -2.3667 -1.5917 -4.6 -2.525 -2 -0.8333 -3.5 -1.7333 -4.5 -2.7 -1 -0.9667 -1.5 -2.2667 -1.5 -3.9 0 -1.4667 0.5 -2.7167 1.5 -3.75s2.3333 -1.6667 4 -1.9v-1.2c0 -0.3667 0.1333 -0.6833 0.4 -0.95 0.2667 -0.26667 0.5833 -0.4 0.95 -0.4h0.05c0.3667 0 0.6833 0.13333 0.95 0.4 0.2667 0.2667 0.4 0.5833 0.4 0.95v1.2c1.0667 0.1 2.0167 0.3917 2.85 0.875 0.8333 0.4833 1.5333 1.1583 2.1 2.025 0.2 0.2667 0.2333 0.5667 0.1 0.9 -0.1333 0.3333 -0.3667 0.5833 -0.7 0.75 -0.3333 0.1667 -0.6667 0.2 -1 0.1 -0.3333 -0.1 -0.6167 -0.2833 -0.85 -0.55 -0.4667 -0.6 -1.0167 -1.05 -1.65 -1.35 -0.6333 -0.3 -1.35 -0.45 -2.15 -0.45 -1.3 0 -2.325 0.3 -3.075 0.9 -0.75 0.6 -1.125 1.4167 -1.125 2.45 0 1.0667 0.4333 1.9167 1.3 2.55 0.8667 0.6333 2.2667 1.35 4.2 2.15 2.3 0.9667 3.9333 1.9833 4.9 3.05 0.9667 1.0667 1.45 2.45 1.45 4.15 0 0.8333 -0.15 1.6 -0.45 2.3 -0.3 0.7 -0.725 1.3 -1.275 1.8 -0.55 0.5 -1.225 0.9083 -2.025 1.225 -0.8 0.3167 -1.7 0.525 -2.7 0.625V37c0 0.3667 -0.1333 0.6833 -0.4 0.95 -0.2667 0.2667 -0.5833 0.4 -0.95 0.4 -0.3667 0 -0.6917 -0.1417 -0.975 -0.425s-0.425 -0.6083 -0.425 -0.975v-1.3c-1.2667 -0.3667 -2.375 -0.9083 -3.325 -1.625 -0.95 -0.7167 -1.7583 -1.6583 -2.425 -2.825 -0.1667 -0.3 -0.1833 -0.5917 -0.05 -0.875 0.1333 -0.2833 0.3833 -0.4917 0.75 -0.625 0.3667 -0.1333 0.7083 -0.1333 1.025 0 0.3167 0.1333 0.5583 0.3667 0.725 0.7 0.5333 0.9333 1.2417 1.6583 2.125 2.175 0.8833 0.5167 1.875 0.775 2.975 0.775ZM24 46c-3.7333 0 -7.3333 -1.1 -10.8 -3.3C9.73333 40.5 7 37.9833 5 35.15v5.35c0 0.4333 -0.14167 0.7917 -0.425 1.075 -0.28333 0.2833 -0.64167 0.425 -1.075 0.425s-0.79167 -0.1417 -1.075 -0.425C2.14167 41.2917 2 40.9333 2 40.5v-9c0 -0.4333 0.14167 -0.7917 0.425 -1.075 0.28333 -0.2833 0.64167 -0.425 1.075 -0.425h9c0.4333 0 0.7917 0.1417 1.075 0.425S14 31.0667 14 31.5c0 0.4333 -0.1417 0.7917 -0.425 1.075S12.9333 33 12.5 33H7.15c1.7 2.5667 4.125 4.875 7.275 6.925C17.575 41.975 20.7667 43 24 43c5 0 9.3083 -1.6833 12.925 -5.05 3.6167 -3.3667 5.625 -7.5 6.025 -12.4 0.0333 -0.4333 0.1917 -0.8 0.475 -1.1 0.2833 -0.3 0.6417 -0.45 1.075 -0.45 0.4 0 0.75 0.1417 1.05 0.425 0.3 0.2833 0.4333 0.625 0.4 1.025 -0.2 2.8667 -0.9083 5.55 -2.125 8.05 -1.2167 2.5 -2.8083 4.675 -4.775 6.525 -1.9667 1.85 -4.2417 3.3083 -6.825 4.375C29.6417 45.4667 26.9 46 24 46Zm0 -41c-5 0 -9.3083 1.68333 -12.925 5.05 -3.61667 3.3667 -5.625 7.5 -6.025 12.4 -0.03333 0.4333 -0.19167 0.8 -0.475 1.1 -0.28333 0.3 -0.64167 0.45 -1.075 0.45 -0.4 0 -0.75 -0.1417 -1.05 -0.425 -0.3 -0.2833 -0.43333 -0.625 -0.4 -1.025 0.2 -2.8667 0.90833 -5.55 2.125 -8.05C5.39167 12 6.98333 9.825 8.95 7.975c1.9667 -1.85 4.2417 -3.30833 6.825 -4.375C18.3583 2.53333 21.1 2 24 2c3.7333 0 7.3333 1.1 10.8 3.3 3.4667 2.2 6.2 4.7167 8.2 7.55V7.5c0 -0.43333 0.1417 -0.79167 0.425 -1.075 0.2833 -0.28333 0.6417 -0.425 1.075 -0.425 0.4333 0 0.7917 0.14167 1.075 0.425 0.2833 0.28333 0.425 0.64167 0.425 1.075v9c0 0.4333 -0.1417 0.7917 -0.425 1.075S44.9333 18 44.5 18h-9c-0.4333 0 -0.7917 -0.1417 -1.075 -0.425S34 16.9333 34 16.5c0 -0.4333 0.1417 -0.7917 0.425 -1.075S35.0667 15 35.5 15h5.35c-1.7 -2.5667 -4.1167 -4.875 -7.25 -6.925S27.2667 5 24 5Z" strokeWidth="1"></path>
        </svg>
      )
    },
    {
      id: 2,
      title: "Capital Efficiency",
      description: "1:1 Delta-neutral backing eliminates over-collateralization, outperforming traditional models like DAI (150%+).",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" width="40" height="40">
          <path fill="currentColor" d="M15.4 41h17.2v-6.35c0 -2.4 -0.8333 -4.425 -2.5 -6.075 -1.6667 -1.65 -3.7 -2.475 -6.1 -2.475 -2.4 0 -4.4333 0.825 -6.1 2.475 -1.6667 1.65 -2.5 3.675 -2.5 6.075V41ZM24 21.9c2.4 0 4.4333 -0.8333 6.1 -2.5 1.6667 -1.6667 2.5 -3.7 2.5 -6.1V7H15.4v6.3c0 2.4 0.8333 4.4333 2.5 6.1 1.6667 1.6667 3.7 2.5 6.1 2.5ZM9.5 44c-0.425 0 -0.78117 -0.1447 -1.0685 -0.434C8.14383 43.277 8 42.9187 8 42.491c0 -0.4273 0.14383 -0.7827 0.4315 -1.066C8.71883 41.1417 9.075 41 9.5 41h2.9v-6.35c0 -2.3667 0.6667 -4.5167 2 -6.45s3.1 -3.3333 5.3 -4.2c-2.2 -0.9 -3.9667 -2.3167 -5.3 -4.25s-2 -4.0833 -2 -6.45V7H9.5c-0.425 0 -0.78117 -0.14467 -1.0685 -0.434C8.14383 6.277 8 5.91867 8 5.491c0 -0.42733 0.14383 -0.78267 0.4315 -1.066C8.71883 4.14167 9.075 4 9.5 4h29c0.425 0 0.7813 0.14467 1.069 0.434 0.2873 0.289 0.431 0.64733 0.431 1.075 0 0.42733 -0.1437 0.78267 -0.431 1.066 -0.2877 0.28333 -0.644 0.425 -1.069 0.425h-2.9v6.3c0 2.3667 -0.6667 4.5167 -2 6.45S30.5 23.1 28.3 24c2.2 0.8667 3.9667 2.2667 5.3 4.2s2 4.0833 2 6.45V41h2.9c0.425 0 0.7813 0.1447 1.069 0.434 0.2873 0.289 0.431 0.6473 0.431 1.075 0 0.4273 -0.1437 0.7827 -0.431 1.066 -0.2877 0.2833 -0.644 0.425 -1.069 0.425h-29Z" strokeWidth="1"></path>
        </svg>
      )
    },
    {
      id: 3,
      title: "High Yields",
      description: "Tap into Solana's lucrative perpetual futures market - short funding rates averaged ~9% annually.",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" width="40" height="40">
          <path fill="currentColor" d="M22.5 39v-7.4c-1.8 -0.3667 -3.4 -1.1417 -4.8 -2.325 -1.4 -1.1833 -2.3667 -2.6583 -2.9 -4.425 -2.4667 -0.2667 -4.55 -1.2667 -6.25 -3C6.85 20.1167 6 18.0333 6 15.6v-2.2c0 -0.825 0.29383 -1.5313 0.8815 -2.119C7.46883 10.6937 8.175 10.4 9 10.4h5.2V9c0 -0.825 0.2938 -1.53133 0.8815 -2.119C15.6688 6.29367 16.375 6 17.2 6h13.6c0.825 0 1.5313 0.29367 2.119 0.881 0.5873 0.58767 0.881 1.294 0.881 2.119v1.4H39c0.825 0 1.5313 0.2937 2.119 0.881 0.5873 0.5877 0.881 1.294 0.881 2.119v2.2c0 2.4333 -0.85 4.5167 -2.55 6.25 -1.7 1.7333 -3.7833 2.7333 -6.25 3 -0.5333 1.7667 -1.5 3.2417 -2.9 4.425s-3 1.9583 -4.8 2.325V39h6.1c0.425 0 0.7813 0.1447 1.069 0.434 0.2873 0.289 0.431 0.6473 0.431 1.075 0 0.4273 -0.1437 0.7827 -0.431 1.066 -0.2877 0.2833 -0.644 0.425 -1.069 0.425H16.4c-0.425 0 -0.7812 -0.1447 -1.0685 -0.434 -0.2877 -0.289 -0.4315 -0.6473 -0.4315 -1.075 0 -0.4273 0.1438 -0.7827 0.4315 -1.066 0.2873 -0.2833 0.6435 -0.425 1.0685 -0.425h6.1Zm-8.3 -17.3v-8.3H9v2.2c0 1.5 0.49167 2.8083 1.475 3.925 0.9833 1.1167 2.225 1.8417 3.725 2.175Zm9.812 7.05c1.892 0 3.4963 -0.666 4.813 -1.998C30.1417 25.42 30.8 23.8027 30.8 21.9V9H17.2v12.9c0 1.9027 0.6623 3.52 1.987 4.852 1.3243 1.332 2.9327 1.998 4.825 1.998ZM33.8 21.7c1.5 -0.3333 2.7417 -1.0583 3.725 -2.175C38.5083 18.4083 39 17.1 39 15.6v-2.2h-5.2v8.3Z" strokeWidth="1"></path>
        </svg>
      )
    },
    {
      id: 4,
      title: "Censorship Resistance",
      description: "Assets secured via Off-Exchange Settlement (OES) providers ensure zero custodial risk, surpassing DeFi's hack losses and CeFi's failures.",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" width="40" height="40">
          <path fill="currentColor" d="M24 40.9004c3.5333 -1.1667 6.4583 -3.3083 8.775 -6.425s3.675 -6.6083 4.075 -10.475H24V7.25039L11 12.1004v9.8c0 0.4 0.0083 0.7417 0.025 1.025 0.0167 0.2833 0.0583 0.6417 0.125 1.075H24v16.9Zm0 2.9c-0.1667 0 -0.325 -0.0167 -0.475 -0.05 -0.15 -0.0333 -0.3083 -0.0833 -0.475 -0.15 -4.6333 -1.5667 -8.3 -4.375 -11 -8.425 -2.7 -4.05 -4.05 -8.4917 -4.05 -13.325v-9.8c0 -0.6333 0.18333 -1.2083 0.55 -1.725 0.36667 -0.51668 0.83333 -0.89168 1.4 -1.12501l13 -4.85c0.3667 -0.13333 0.7167 -0.2 1.05 -0.2 0.3333 0 0.6833 0.06667 1.05 0.2l13 4.85c0.5667 0.23333 1.0333 0.60833 1.4 1.12501 0.3667 0.5167 0.55 1.0917 0.55 1.725v9.8c0 4.8333 -1.35 9.275 -4.05 13.325 -2.7 4.05 -6.3667 6.8583 -11 8.425 -0.1667 0.0667 -0.325 0.1167 -0.475 0.15 -0.15 0.0333 -0.3083 0.05 -0.475 0.05Z" strokeWidth="1"></path>
        </svg>
      )
    },
    {
      id: 5,
      title: "Diversified Revenue",
      description: "Solidus generates income from funding rates, stablecoin rewards, and SOL staking, ensuring sustainable yields even in bear markets, backed by a reserve fund.",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" width="40" height="40">
          <path fill="currentColor" d="M24 43.55c-0.2667 0 -0.525 -0.0333 -0.775 -0.1 -0.25 -0.0667 -0.4917 -0.1667 -0.725 -0.3l-15 -8.6c-0.46667 -0.2667 -0.83333 -0.625 -1.1 -1.075 -0.26667 -0.45 -0.4 -0.9583 -0.4 -1.525v-16.4c0 -0.5667 0.14167 -1.0833 0.425 -1.55 0.28333 -0.4667 0.65833 -0.8333 1.125 -1.1l15 -8.15c0.2333 -0.13333 0.4667 -0.225 0.7 -0.275 0.2333 -0.05 0.4833 -0.075 0.75 -0.075s0.5167 0.025 0.75 0.075c0.2333 0.05 0.4667 0.14167 0.7 0.275l15 8.15c0.4667 0.2667 0.8417 0.6333 1.125 1.1 0.2833 0.4667 0.425 0.9833 0.425 1.55v16.4c0 0.5667 -0.1333 1.075 -0.4 1.525 -0.2667 0.45 -0.6333 0.8083 -1.1 1.075l-15 8.6c-0.2333 0.1333 -0.475 0.2333 -0.725 0.3 -0.25 0.0667 -0.5083 0.1 -0.775 0.1ZM18.3 19.1c0.7667 -0.7667 1.6417 -1.3917 2.625 -1.875 0.9833 -0.4833 2.0083 -0.725 3.075 -0.725s2.0917 0.2417 3.075 0.725c0.9833 0.4833 1.8583 1.1083 2.625 1.875l7.65 -4.5L24 7.5l-13.35 7.1 7.65 4.5Zm4.2 20.6v-8.35c-1.7333 -0.4667 -3.1667 -1.375 -4.3 -2.725 -1.1333 -1.35 -1.7 -2.8917 -1.7 -4.625 0 -0.3333 0.0167 -0.6833 0.05 -1.05s0.1333 -0.7667 0.3 -1.2L9 17.1v14.85l13.5 7.75ZM24 28.5c1.2667 0 2.3333 -0.4417 3.2 -1.325 0.8667 -0.8833 1.3 -1.9417 1.3 -3.175 0 -1.2667 -0.4333 -2.3333 -1.3 -3.2 -0.8667 -0.8667 -1.9333 -1.3 -3.2 -1.3 -1.2333 0 -2.2917 0.4333 -3.175 1.3 -0.8833 0.8667 -1.325 1.9333 -1.325 3.2 0 1.2333 0.4417 2.2917 1.325 3.175 0.8833 0.8833 1.9417 1.325 3.175 1.325Zm1.5 11.2L39 31.95V17.1l-7.85 4.65c0.1667 0.4667 0.2667 0.875 0.3 1.225 0.0333 0.35 0.05 0.6917 0.05 1.025 0 1.7333 -0.5667 3.275 -1.7 4.625s-2.5667 2.2583 -4.3 2.725v8.35Z" strokeWidth="1"></path>
        </svg>
      )
    }
  ];

  const maxIndex = items.length - 3; // 最大索引（显示3个item）

  const handlePrev = () => {
    setCurrentIndex(prev => Math.max(0, prev - 1));
  };

  const handleNext = () => {
    setCurrentIndex(prev => Math.min(maxIndex, prev + 1));
  };

  // 只显示当前和临近的几个item
  const visibleItems = items.slice(
    Math.max(0, currentIndex),
    Math.min(items.length, currentIndex + 3)
  );

  return (
    <section className="solid-choice-section">
      <div className="solid-choice-container">
        <h2 className="solid-choice-heading">
          The Solid Choice on Solana
        </h2>
        
        <div className={`carousel-wrapper ${isReady ? 'carousel-ready' : 'carousel-loading'}`}>
          {/* 左侧导航按钮 */}
          <button 
            className="carousel-nav-button carousel-nav-prev"
            onClick={handlePrev}
            disabled={currentIndex === 0}
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M15 18l-6-6 6-6" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
          </button>

          {/* Carousel容器 */}
          <div className="carousel-container">
            <div className="carousel-visible-area">
              {visibleItems.map((item) => (
                <div key={item.id} className="carousel-item">
                  <div className="carousel-item-icon">
                    {item.icon}
                  </div>
                  <h3 className="carousel-item-title">
                    {item.title}
                  </h3>
                  <p className="carousel-item-description">
                    {item.description}
                  </p>
                </div>
              ))}
            </div>
          </div>

          {/* 右侧导航按钮 */}
          <button 
            className="carousel-nav-button carousel-nav-next"
            onClick={handleNext}
            disabled={currentIndex === maxIndex}
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M9 18l6-6-6-6" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
          </button>
        </div>
      </div>
    </section>
  );
};

export default SolidChoiceCarousel; 