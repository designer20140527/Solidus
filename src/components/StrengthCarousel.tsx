'use client';

import React, { useState, useEffect } from 'react';

const StrengthCarousel = () => {
  const [currentIndex, setCurrentIndex] = useState(0);
  const [isReady, setIsReady] = useState(false);

  // 预先加载所有内容
  useEffect(() => {
    // 等待组件完全挂载并渲染
    const timer = setTimeout(() => {
      setIsReady(true);
    }, 100);
    
    return () => clearTimeout(timer);
  }, []);

  const items = [
    {
      id: 1,
      title: "Atomic Minting",
      description: "Deposit SOL, BTC, or ETH, and Solidus instantly mints $SUSD with a matching short perpetual contract. Stable value, secured.",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" width="40" height="40">
          <path fill="currentColor" d="m36.8996 39 -9.85 -9.85c-0.2667 -0.2667 -0.4 -0.6 -0.4 -1s0.1333 -0.75 0.4 -1.05c0.2667 -0.3 0.6 -0.4583 1 -0.475 0.4 -0.0167 0.75 0.125 1.05 0.425l9.85 9.85v-8.8c0 -0.425 0.148 -0.7813 0.444 -1.069 0.2957 -0.2873 0.6623 -0.431 1.1 -0.431 0.4373 0 0.7977 0.1437 1.081 0.431 0.2833 0.2877 0.425 0.644 0.425 1.069v12.4c0 0.425 -0.1437 0.7812 -0.431 1.0685 -0.2877 0.2877 -0.644 0.4315 -1.069 0.4315h-12.4c-0.425 0 -0.7812 -0.1447 -1.0685 -0.434 -0.2877 -0.289 -0.4315 -0.6473 -0.4315 -1.075 0 -0.4273 0.1438 -0.7827 0.4315 -1.066 0.2873 -0.2833 0.6435 -0.425 1.0685 -0.425h8.8Zm-24.45 -7.3H7.59961c-0.425 0 -0.78117 -0.1447 -1.0685 -0.434 -0.28767 -0.289 -0.4315 -0.6473 -0.4315 -1.075 0 -0.4273 0.14383 -0.7827 0.4315 -1.066 0.28733 -0.2833 0.6435 -0.425 1.0685 -0.425H18.4996v-7.3H9.09961c-0.825 0 -1.53117 -0.2938 -2.1185 -0.8815 -0.58767 -0.5873 -0.8815 -1.2935 -0.8815 -2.1185v-7.3c0 -0.825 0.29383 -1.53133 0.8815 -2.119 0.58733 -0.58733 1.2935 -0.881 2.1185 -0.881h3.34999v-0.6c0 -0.425 0.1447 -0.78133 0.434 -1.069 0.289 -0.28733 0.6473 -0.431 1.075 -0.431 0.4273 0 0.7827 0.14367 1.066 0.431 0.2833 0.28767 0.425 0.644 0.425 1.069v0.6h4.6c0.425 0 0.7813 0.14467 1.069 0.434 0.2873 0.289 0.431 0.64733 0.431 1.075 0 0.4273 -0.1437 0.7827 -0.431 1.066 -0.2877 0.2833 -0.644 0.425 -1.069 0.425H9.09961v7.3h9.39999c0.8667 0 1.5917 0.2937 2.175 0.881 0.5833 0.5877 0.875 1.294 0.875 2.119v7.3c0 0.825 -0.2917 1.5312 -0.875 2.1185 -0.5833 0.5877 -1.3083 0.8815 -2.175 0.8815h-3.05v0.6c0 0.425 -0.1447 0.7812 -0.434 1.0685 -0.289 0.2877 -0.6473 0.4315 -1.075 0.4315 -0.4273 0 -0.7827 -0.1438 -1.066 -0.4315 -0.2833 -0.2873 -0.425 -0.6435 -0.425 -1.0685v-0.6Z" strokeWidth="1"></path>
        </svg>
      )
    },
    {
      id: 2,
      title: "$sSUSD: Earn Rewards",
      description: "Stake $SUSD to receive $sSUSD, an asset that grows with protocol income. Pure value accumulation, no rehypothecation.",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" width="40" height="40">
          <path fill="currentColor" d="M11.5 42c-0.7 0 -1.3582 -0.2327 -1.9745 -0.698 -0.61633 -0.4657 -1.02483 -1.033 -1.2255 -1.702 -0.83333 -2.8667 -1.52567 -5.341 -2.077 -7.423 -0.55133 -2.082 -0.99083 -3.91 -1.3185 -5.484 -0.32733 -1.574 -0.55983 -2.9705 -0.6975 -4.1895C4.069 21.2848 4 20.117 4 19c0 -3.0667 1.06667 -5.6667 3.2 -7.8C9.33333 9.06667 11.9333 8 15 8h10c0.9 -1.2 2.0417 -2.16667 3.425 -2.9C29.8083 4.36667 31.3333 4 33 4c0.8333 0 1.5417 0.29167 2.125 0.875C35.7083 5.45833 36 6.16667 36 7c0 0.2 -0.025 0.4 -0.075 0.6 -0.05 0.2 -0.1083 0.38333 -0.175 0.55 -0.1333 0.36667 -0.2583 0.73333 -0.375 1.1 -0.1167 0.36667 -0.2083 0.7667 -0.275 1.2L39.65 15h2.85c0.425 0 0.7813 0.1437 1.069 0.431 0.2873 0.2877 0.431 0.644 0.431 1.069v11.35c0 0.3413 -0.0917 0.6433 -0.275 0.906 -0.1833 0.2627 -0.4417 0.444 -0.775 0.544l-4.5965 1.515L35.65 39.85c-0.201 0.6537 -0.565 1.1755 -1.092 1.5655 -0.5273 0.3897 -1.13 0.5845 -1.808 0.5845H27c-0.825 0 -1.5312 -0.2938 -2.1185 -0.8815C24.2938 40.5312 24 39.825 24 39v-1h-4v1c0 0.825 -0.2937 1.5312 -0.881 2.1185C18.5313 41.7062 17.825 42 17 42h-5.5Zm-0.25 -3H17v-4h10v4h5.75l3.15 -10.5 5.1 -1.75V18h-2.6L32 11.6c0.0333 -0.5667 0.125 -1.2583 0.275 -2.075 0.15 -0.81667 0.3583 -1.725 0.625 -2.725 -1.4333 0.36667 -2.7 0.91667 -3.8 1.65 -1.1 0.73333 -1.9 1.5833 -2.4 2.55H15c-2.2097 0 -4.0953 0.781 -5.657 2.343C7.781 14.9047 7 16.7903 7 19c0 1.4 0.36667 3.8417 1.1 7.325 0.73333 3.4833 1.78333 7.7083 3.15 12.675ZM32 22c0.5667 0 1.0417 -0.1917 1.425 -0.575S34 20.5667 34 20c0 -0.5667 -0.1917 -1.0417 -0.575 -1.425S32.5667 18 32 18c-0.5667 0 -1.0417 0.1917 -1.425 0.575S30 19.4333 30 20c0 0.5667 0.1917 1.0417 0.575 1.425S31.4333 22 32 22Zm-7.5 -5c0.425 0 0.7813 -0.1447 1.069 -0.434 0.2873 -0.289 0.431 -0.6473 0.431 -1.075 0 -0.4273 -0.1437 -0.7827 -0.431 -1.066 -0.2877 -0.2833 -0.644 -0.425 -1.069 -0.425h-7c-0.425 0 -0.7812 0.1447 -1.0685 0.434 -0.2877 0.289 -0.4315 0.6473 -0.4315 1.075 0 0.4273 0.1438 0.7827 0.4315 1.066 0.2873 0.2833 0.6435 0.425 1.0685 0.425h7Z" strokeWidth="1"></path>
        </svg>
      )
    },
    {
      id: 3,
      title: "Liquidity Provision",
      description: "Add $SUSD to Solana AMMs and earn $SOLID rewards while boosting DeFi liquidity.",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" width="40" height="40">
          <path fill="currentColor" d="M24 27.1c-0.2667 0 -0.5083 -0.025 -0.725 -0.075 -0.2167 -0.05 -0.4417 -0.1416 -0.675 -0.275l-18.1 -9.7c-0.26667 -0.1666 -0.45833 -0.3583 -0.575 -0.575 -0.11667 -0.2166 -0.175 -0.4583 -0.175 -0.725 0 -0.2666 0.05833 -0.5083 0.175 -0.725 0.11667 -0.2166 0.30833 -0.4083 0.575 -0.575l18.1 -9.69998c0.2333 -0.13333 0.4583 -0.225 0.675 -0.275 0.2167 -0.05 0.4583 -0.075 0.725 -0.075s0.5083 0.025 0.725 0.075c0.2167 0.05 0.4417 0.14167 0.675 0.275L43.5 14.45c0.2667 0.1667 0.4667 0.3584 0.6 0.575 0.1333 0.2167 0.2 0.4584 0.2 0.725 0 0.2667 -0.0667 0.5084 -0.2 0.725 -0.1333 0.2167 -0.3333 0.4084 -0.6 0.575l-18.1 9.7c-0.2333 0.1334 -0.4583 0.225 -0.675 0.275 -0.2167 0.05 -0.4583 0.075 -0.725 0.075Zm0 -3.05 15.75 -8.3L24 7.45002 8.3 15.75l15.7 8.3Zm0 8.3 16.95 -9.05c0.0667 -0.0333 0.3 -0.0833 0.7 -0.15 0.4 0 0.75 0.1417 1.05 0.425 0.3 0.2834 0.45 0.6417 0.45 1.075 0 0.2667 -0.0667 0.5084 -0.2 0.725 -0.1333 0.2167 -0.3333 0.4084 -0.6 0.575L25.4 35c-0.2333 0.1334 -0.4583 0.225 -0.675 0.275 -0.2167 0.05 -0.4583 0.075 -0.725 0.075s-0.5083 -0.025 -0.725 -0.075c-0.2167 -0.05 -0.4417 -0.1416 -0.675 -0.275L5.7 25.95c-0.26667 -0.1666 -0.46667 -0.3583 -0.6 -0.575 -0.13333 -0.2166 -0.2 -0.4583 -0.2 -0.725 0 -0.4333 0.15 -0.7916 0.45 -1.075 0.3 -0.2833 0.65 -0.425 1.05 -0.425 0.13333 0 0.25833 0.0167 0.375 0.05 0.11667 0.0334 0.225 0.0834 0.325 0.15l16.9 9Zm0 8.25 16.95 -9.05c0.0667 -0.0333 0.3 -0.0833 0.7 -0.15 0.4 0 0.75 0.1417 1.05 0.425 0.3 0.2834 0.45 0.6417 0.45 1.075 0 0.2667 -0.0667 0.5084 -0.2 0.725 -0.1333 0.2167 -0.3333 0.4084 -0.6 0.575L25.4 43.25c-0.2333 0.1334 -0.4583 0.225 -0.675 0.275 -0.2167 0.05 -0.4583 0.075 -0.725 0.075s-0.5083 -0.025 -0.725 -0.075c-0.2167 -0.05 -0.4417 -0.1416 -0.675 -0.275L5.7 34.2c-0.26667 -0.1666 -0.46667 -0.3583 -0.6 -0.575 -0.13333 -0.2166 -0.2 -0.4583 -0.2 -0.725 0 -0.4333 0.15 -0.7916 0.45 -1.075 0.3 -0.2833 0.65 -0.425 1.05 -0.425 0.13333 0 0.25833 0.0167 0.375 0.05 0.11667 0.0334 0.225 0.0834 0.325 0.15l16.9 9Z" strokeWidth="1"></path>
        </svg>
      )
    },
    {
      id: 4,
      title: "Cross-Chain",
      description: "Seamlessly move $SUSD between Solana and Ethereum using LayerZero or Wormhole. Expand your reach.",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" width="40" height="40">
          <path fill="currentColor" d="M35 34h-4.55c-0.4 0 -0.7417 -0.1438 -1.025 -0.4315C29.1417 33.2812 29 32.925 29 32.5c0 -0.4 0.1438 -0.75 0.4315 -1.05 0.2873 -0.3 0.6435 -0.45 1.0685 -0.45H35v-4.5c0 -0.425 0.1447 -0.7813 0.434 -1.069 0.289 -0.2873 0.6473 -0.431 1.075 -0.431 0.4273 0 0.7827 0.1437 1.066 0.431 0.2833 0.2877 0.425 0.644 0.425 1.069V31h4.5c0.425 0 0.7813 0.1447 1.069 0.434 0.2873 0.289 0.431 0.6473 0.431 1.075 0 0.4273 -0.1437 0.7827 -0.431 1.066 -0.2877 0.2833 -0.644 0.425 -1.069 0.425H38v4.5c0 0.425 -0.1447 0.7812 -0.434 1.0685 -0.289 0.2877 -0.6473 0.4315 -1.075 0.4315 -0.4273 0 -0.7827 -0.1438 -1.066 -0.4315C35.1417 39.2812 35 38.925 35 38.5V34Zm-14 0h-7c-2.7667 0 -5.125 -0.975 -7.075 -2.925C4.975 29.125 4 26.7667 4 24s0.975 -5.125 2.925 -7.075C8.875 14.975 11.2333 14 14 14h7c0.4 0 0.75 0.15 1.05 0.45 0.3 0.3 0.45 0.6583 0.45 1.075 0 0.4167 -0.15 0.7667 -0.45 1.05 -0.3 0.2833 -0.65 0.425 -1.05 0.425h-7c-1.9443 0 -3.5972 0.6793 -4.9585 2.038C7.6805 20.397 7 22.047 7 23.988c0 1.9413 0.6805 3.5953 2.0415 4.962C10.4028 30.3167 12.0557 31 14 31h7c0.4 0 0.75 0.15 1.05 0.45 0.3 0.3 0.45 0.6583 0.45 1.075 0 0.4167 -0.15 0.7667 -0.45 1.05 -0.3 0.2833 -0.65 0.425 -1.05 0.425Zm-3.25 -8.5c-0.425 0 -0.7812 -0.1447 -1.0685 -0.434 -0.2877 -0.289 -0.4315 -0.6473 -0.4315 -1.075 0 -0.4273 0.1438 -0.7827 0.4315 -1.066 0.2873 -0.2833 0.6435 -0.425 1.0685 -0.425h12.5c0.425 0 0.7813 0.1447 1.069 0.434 0.2873 0.289 0.431 0.6473 0.431 1.075 0 0.4273 -0.1437 0.7827 -0.431 1.066 -0.2877 0.2833 -0.644 0.425 -1.069 0.425h-12.5ZM44 24h-3c0 -1.9333 -0.6802 -3.5833 -2.0405 -4.95C37.5992 17.6833 35.9473 17 34.004 17H26.95c-0.4 0 -0.7417 -0.1438 -1.025 -0.4315 -0.2833 -0.2873 -0.425 -0.6435 -0.425 -1.0685 0 -0.4 0.1438 -0.75 0.4315 -1.05 0.2873 -0.3 0.6435 -0.45 1.0685 -0.45h7c2.7667 0 5.125 0.975 7.075 2.925C43.025 18.875 44 21.2333 44 24Z" strokeWidth="1"></path>
        </svg>
      )
    },
    {
      id: 5,
      title: "Flexible Redemption",
      description: "Redeem $SUSD for underlying assets through AMM pools or direct channels.",
      icon: (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" width="40" height="40">
          <path fill="currentColor" d="M11.15 39H16c0.425 0 0.7813 0.1447 1.069 0.434 0.2873 0.289 0.431 0.6473 0.431 1.075 0 0.4273 -0.1437 0.7827 -0.431 1.066 -0.2877 0.2833 -0.644 0.425 -1.069 0.425H7.5c-0.425 0 -0.78117 -0.1438 -1.0685 -0.4315C6.14383 41.2812 6 40.925 6 40.5V32c0 -0.425 0.14467 -0.7813 0.434 -1.069 0.289 -0.2873 0.64733 -0.431 1.075 -0.431 0.42733 0 0.78267 0.1437 1.066 0.431 0.28333 0.2877 0.425 0.644 0.425 1.069v4.85l6.35 -6.35c0.3 -0.3 0.6583 -0.45 1.075 -0.45 0.4167 0 0.775 0.15 1.075 0.45 0.3 0.3 0.45 0.6583 0.45 1.075 0 0.4167 -0.15 0.775 -0.45 1.075L11.15 39Zm25.7 0 -6.3 -6.3c-0.3 -0.3 -0.4417 -0.6583 -0.425 -1.075 0.0167 -0.4167 0.175 -0.775 0.475 -1.075 0.3 -0.3 0.6583 -0.45 1.075 -0.45 0.4167 0 0.775 0.15 1.075 0.45l6.25 6.3V32c0 -0.425 0.1447 -0.7813 0.434 -1.069 0.289 -0.2873 0.6473 -0.431 1.075 -0.431 0.4273 0 0.7827 0.1437 1.066 0.431 0.2833 0.2877 0.425 0.644 0.425 1.069v8.5c0 0.425 -0.1437 0.7812 -0.431 1.0685 -0.2877 0.2877 -0.644 0.4315 -1.069 0.4315H32c-0.425 0 -0.7812 -0.1447 -1.0685 -0.434 -0.2877 -0.289 -0.4315 -0.6473 -0.4315 -1.075 0 -0.4273 0.1438 -0.7827 0.4315 -1.066C31.2188 39.1417 31.575 39 32 39h4.85ZM9 11.15V16c0 0.425 -0.14467 0.7812 -0.434 1.0685 -0.289 0.2877 -0.64733 0.4315 -1.075 0.4315 -0.42733 0 -0.78267 -0.1438 -1.066 -0.4315C6.14167 16.7812 6 16.425 6 16V7.5c0 -0.425 0.14383 -0.78133 0.4315 -1.069C6.71883 6.14367 7.075 6 7.5 6H16c0.425 0 0.7813 0.14467 1.069 0.434 0.2873 0.289 0.431 0.64733 0.431 1.075 0 0.42733 -0.1437 0.78267 -0.431 1.066C16.7813 8.85833 16.425 9 16 9h-4.85l6.3 6.3c0.3 0.3 0.45 0.65 0.45 1.05s-0.15 0.75 -0.45 1.05c-0.3 0.3 -0.6583 0.45 -1.075 0.45 -0.4167 0 -0.775 -0.15 -1.075 -0.45L9 11.15Zm30 0 -6.3 6.3c-0.3 0.3 -0.65 0.4417 -1.05 0.425 -0.4 -0.0167 -0.75 -0.175 -1.05 -0.475 -0.3 -0.3 -0.45 -0.6583 -0.45 -1.075 0 -0.4167 0.15 -0.775 0.45 -1.075L36.85 9H32c-0.425 0 -0.7812 -0.14467 -1.0685 -0.434 -0.2877 -0.289 -0.4315 -0.64733 -0.4315 -1.075 0 -0.42733 0.1438 -0.78267 0.4315 -1.066C31.2188 6.14167 31.575 6 32 6h8.5c0.425 0 0.7813 0.14367 1.069 0.431 0.2873 0.28767 0.431 0.644 0.431 1.069V16c0 0.425 -0.1447 0.7812 -0.434 1.0685 -0.289 0.2877 -0.6473 0.4315 -1.075 0.4315 -0.4273 0 -0.7827 -0.1438 -1.066 -0.4315C39.1417 16.7812 39 16.425 39 16v-4.85Z" strokeWidth="1"></path>
        </svg>
      )
    }
  ];

  const maxIndex = items.length - 3; // 最大索引（显示3个item）

  const handlePrev = () => {
    setCurrentIndex(prev => Math.max(0, prev - 1));
  };

  const handleNext = () => {
    setCurrentIndex(prev => Math.min(maxIndex, prev + 1));
  };

  // 只显示当前和临近的几个item
  const visibleItems = items.slice(
    Math.max(0, currentIndex),
    Math.min(items.length, currentIndex + 3)
  );

  return (
    <section id="about" className="strength-carousel-section">
      <div className="strength-carousel-container">
        <h2 className="strength-carousel-heading">
          Backed by Strength
        </h2>
        
        <div className={`carousel-wrapper ${isReady ? 'carousel-ready' : 'carousel-loading'}`}>
          {/* 左侧导航按钮 */}
          <button 
            className="carousel-nav-button carousel-nav-prev"
            onClick={handlePrev}
            disabled={currentIndex === 0}
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M15 18l-6-6 6-6" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
          </button>

          {/* Carousel容器 - 简化版本，不使用复杂的transform */}
          <div className="carousel-container">
            <div className="carousel-visible-area">
              {visibleItems.map((item, index) => (
                <div key={item.id} className="carousel-item">
                  <div className="carousel-item-icon">
                    {item.icon}
                  </div>
                  <h3 className="carousel-item-title">
                    {item.title}
                  </h3>
                  <p className="carousel-item-description">
                    {item.description}
                  </p>
                </div>
              ))}
            </div>
          </div>

          {/* 右侧导航按钮 */}
          <button 
            className="carousel-nav-button carousel-nav-next"
            onClick={handleNext}
            disabled={currentIndex === maxIndex}
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M9 18l6-6-6-6" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
          </button>
        </div>
      </div>
    </section>
  );
};

export default StrengthCarousel; 